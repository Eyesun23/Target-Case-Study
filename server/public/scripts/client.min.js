var myRetailApp=angular.module("myRetailApp",["ngRoute","ngMaterial","ngSanitize"]);myRetailApp.config(["$mdThemingProvider",function(a){a.theme("altTheme").primaryPalette("grey").accentPalette("blue-grey")}]),myRetailApp.config(["$routeProvider","$locationProvider",function(a,b){b.hashPrefix(""),a.when("/item:code",{templateUrl:"/views/templates/product.html",controller:"ProductController"}).otherwise({redirectTo:"item0"})}]),myRetailApp.controller("ProductController",["$scope","$http","$routeParams","DataService","Utilities",function(a,b,c,d,e){NUM_VISIBLE_IMAGES=3,QUANTITY_MAX=20,a.arrayOfVisibleSlides=[];for(var f=0;f<NUM_VISIBLE_IMAGES;f++)a.arrayOfVisibleSlides.push(f);var g;a.numberOfStars=[1,2,3,4,5],a.quantity=1,a.pickUpVisible=!1,a.addToCartVisible=!1,a.primaryImageURL,a.getDate=e.getDate,d.getCatalogItem().then(function(b){if(0==c.code||1==c.code||0==c.code||b.data[c.code]){switch(console.log(c.code),a.validData=!0,a.catalogItem=b.data[c.code].CatalogEntryView[0],a.primaryImageURL=a.catalogItem.Images[0].PrimaryImage[0].image,parseInt(a.catalogItem.purchasingChannelCode)){case 0:a.pickUpVisible=!0,a.addToCartVisible=!0;break;case 1:a.pickUpVisible=!1,a.addToCartVisible=!0;break;case 2:a.pickUpVisible=!0,a.addToCartVisible=!1;break;default:a.pickUpVisible=!1,a.addToCartVisible=!1}g=a.catalogItem.Images[0].AlternateImages.length}else console.log("product not found (not a valid route)"),a.validData=!1}).catch(function(a){console.log(a.status)}),a.moveSlides=function(b){1==b?a.arrayOfVisibleSlides[NUM_VISIBLE_IMAGES-1]==g-1?(a.arrayOfVisibleSlides.shift(),a.arrayOfVisibleSlides.push(0)):(a.arrayOfVisibleSlides.shift(),a.arrayOfVisibleSlides.push(a.arrayOfVisibleSlides[a.arrayOfVisibleSlides.length-1]+1)):0==a.arrayOfVisibleSlides[0]?(a.arrayOfVisibleSlides.pop(),a.arrayOfVisibleSlides.unshift(g-1)):(a.arrayOfVisibleSlides.pop(),a.arrayOfVisibleSlides.unshift(a.arrayOfVisibleSlides[0]-1))},a.changePrimaryImage=function(b){a.primaryImageURL=b},a.addQuantity=function(){a.quantity<QUANTITY_MAX&&a.quantity++},a.removeQuantity=function(){a.quantity>1&&a.quantity--}}]),myRetailApp.factory("DataService",["$http","$q",function(a,b){return{getCatalogItem:function(c){var d=b.defer();return a.get("/catalog").then(function(a){d.resolve(a)}).catch(function(a){d.reject(a)}),d.promise}}}]),myRetailApp.factory("Utilities",[function(){function a(a){if(a){date=new Date(a);var b=date.getDate(),c=date.getMonth()+1,d=date.getFullYear();switch(c){case 1:month="January";break;case 2:month="February";break;case 3:month="March";break;case 4:month="April";break;case 5:month="May";break;case 6:month="June";break;case 7:month="July";break;case 8:month="August";break;case 9:month="September";break;case 10:month="October";break;case 11:month="November";break;case 12:month="December";break;default:month=""}return month+" "+b+", "+d}}return{getDate:a}}]);